version: "3"

services:

  # https://github.com/solid/node-solid-server/tree/master/docker-image
  solid:
    image: nodesolidserver/node-solid-server:latest
    container_name: solid-server
    restart: unless-stopped
    #user: "1001:1001"
    ports:
      - 8443:8443
    environment: 
      # See options: https://github.com/solid/node-solid-server#extra-flags-expert
      - "SOLID_SERVER_URI=https://solid.137.120.31.102.nip.io"
      - "SOLID_SSL_KEY=/opt/solid/certs/solid.137.120.31.102.nip.io/key.pem"
      - "SOLID_SSL_CERT=/opt/solid/certs/solid.137.120.31.102.nip.io/fullchain.pem"
      - "SOLID_MULTIUSER=true"
      # - "SOLID_WEBID=true"

      - "SOLID_SERVER_NAME=Solid Station"
      - "SOLID_SERVER_DESCRIPTION=Solid server hosted at the Institute of Data Science at Maastricht University"
      - "SOLID_SERVER_LOGO=https://maastrichtu-ids.github.io/dsri-documentation/img/favicon.ico"

      # Nginx config for 128 pods! See the generate_urls.py scripts to generate your URLs!
      - "VIRTUAL_HOST=solid.137.120.31.102.nip.io,solidforresearchtest01.solid.137.120.31.102.nip.io,solidforresearchtest02.solid.137.120.31.102.nip.io,solidforresearchtest03.solid.137.120.31.102.nip.io,solidforresearchtest04.solid.137.120.31.102.nip.io,solidforresearchtest05.solid.137.120.31.102.nip.io,solidforresearchtest06.solid.137.120.31.102.nip.io,solidforresearchtest07.solid.137.120.31.102.nip.io,solidforresearchtest08.solid.137.120.31.102.nip.io,solidforresearchtest09.solid.137.120.31.102.nip.io,solidforresearchtest10.solid.137.120.31.102.nip.io,solidforresearchtest11.solid.137.120.31.102.nip.io,solidforresearchtest12.solid.137.120.31.102.nip.io,solidforresearchtest13.solid.137.120.31.102.nip.io,solidforresearchtest14.solid.137.120.31.102.nip.io,solidforresearchtest15.solid.137.120.31.102.nip.io,solidforresearchtest16.solid.137.120.31.102.nip.io,solidforresearchtest17.solid.137.120.31.102.nip.io,solidforresearchtest18.solid.137.120.31.102.nip.io,solidforresearchtest19.solid.137.120.31.102.nip.io,solidforresearchtest20.solid.137.120.31.102.nip.io,solidforresearchtest21.solid.137.120.31.102.nip.io,solidforresearchtest22.solid.137.120.31.102.nip.io,solidforresearchtest23.solid.137.120.31.102.nip.io,solidforresearchtest24.solid.137.120.31.102.nip.io,solidforresearchtest25.solid.137.120.31.102.nip.io,solidforresearchtest26.solid.137.120.31.102.nip.io,solidforresearchtest27.solid.137.120.31.102.nip.io,solidforresearchtest28.solid.137.120.31.102.nip.io,solidforresearchtest29.solid.137.120.31.102.nip.io,solidforresearchtest30.solid.137.120.31.102.nip.io,solidforresearchtest31.solid.137.120.31.102.nip.io,solidforresearchtest32.solid.137.120.31.102.nip.io,solidforresearchtest33.solid.137.120.31.102.nip.io,solidforresearchtest34.solid.137.120.31.102.nip.io,solidforresearchtest35.solid.137.120.31.102.nip.io,solidforresearchtest36.solid.137.120.31.102.nip.io,solidforresearchtest37.solid.137.120.31.102.nip.io,solidforresearchtest38.solid.137.120.31.102.nip.io,solidforresearchtest39.solid.137.120.31.102.nip.io,solidforresearchtest40.solid.137.120.31.102.nip.io,solidforresearchtest41.solid.137.120.31.102.nip.io,solidforresearchtest42.solid.137.120.31.102.nip.io,solidforresearchtest43.solid.137.120.31.102.nip.io,solidforresearchtest44.solid.137.120.31.102.nip.io,solidforresearchtest45.solid.137.120.31.102.nip.io,solidforresearchtest46.solid.137.120.31.102.nip.io,solidforresearchtest47.solid.137.120.31.102.nip.io,solidforresearchtest48.solid.137.120.31.102.nip.io,solidforresearchtest49.solid.137.120.31.102.nip.io,solidforresearchtest50.solid.137.120.31.102.nip.io,solidforresearchtest51.solid.137.120.31.102.nip.io,solidforresearchtest52.solid.137.120.31.102.nip.io,solidforresearchtest53.solid.137.120.31.102.nip.io,solidforresearchtest54.solid.137.120.31.102.nip.io,solidforresearchtest55.solid.137.120.31.102.nip.io,solidforresearchtest56.solid.137.120.31.102.nip.io,solidforresearchtest57.solid.137.120.31.102.nip.io,solidforresearchtest58.solid.137.120.31.102.nip.io,solidforresearchtest59.solid.137.120.31.102.nip.io,solidforresearchtest60.solid.137.120.31.102.nip.io,solidforresearchtest61.solid.137.120.31.102.nip.io,solidforresearchtest62.solid.137.120.31.102.nip.io,solidforresearchtest63.solid.137.120.31.102.nip.io,solidforresearchtest64.solid.137.120.31.102.nip.io,solidforresearchtest65.solid.137.120.31.102.nip.io,solidforresearchtest66.solid.137.120.31.102.nip.io,solidforresearchtest67.solid.137.120.31.102.nip.io,solidforresearchtest68.solid.137.120.31.102.nip.io,solidforresearchtest69.solid.137.120.31.102.nip.io,solidforresearchtest70.solid.137.120.31.102.nip.io,solidforresearchtest71.solid.137.120.31.102.nip.io,solidforresearchtest72.solid.137.120.31.102.nip.io,solidforresearchtest73.solid.137.120.31.102.nip.io,solidforresearchtest74.solid.137.120.31.102.nip.io,solidforresearchtest75.solid.137.120.31.102.nip.io,solidforresearchtest76.solid.137.120.31.102.nip.io,solidforresearchtest77.solid.137.120.31.102.nip.io,solidforresearchtest78.solid.137.120.31.102.nip.io,solidforresearchtest79.solid.137.120.31.102.nip.io,solidforresearchtest80.solid.137.120.31.102.nip.io,solidforresearchtest81.solid.137.120.31.102.nip.io,solidforresearchtest82.solid.137.120.31.102.nip.io,solidforresearchtest83.solid.137.120.31.102.nip.io,solidforresearchtest84.solid.137.120.31.102.nip.io,solidforresearchtest85.solid.137.120.31.102.nip.io,solidforresearchtest86.solid.137.120.31.102.nip.io,solidforresearchtest87.solid.137.120.31.102.nip.io,solidforresearchtest88.solid.137.120.31.102.nip.io,solidforresearchtest89.solid.137.120.31.102.nip.io,solidforresearchtest90.solid.137.120.31.102.nip.io,solidforresearchtest91.solid.137.120.31.102.nip.io,solidforresearchtest92.solid.137.120.31.102.nip.io,solidforresearchtest93.solid.137.120.31.102.nip.io,solidforresearchtest94.solid.137.120.31.102.nip.io,solidforresearchtest95.solid.137.120.31.102.nip.io,solidforresearchtest96.solid.137.120.31.102.nip.io,solidforresearchtest97.solid.137.120.31.102.nip.io,solidforresearchtest98.solid.137.120.31.102.nip.io,solidforresearchtest99.solid.137.120.31.102.nip.io,solidforresearchtest100.solid.137.120.31.102.nip.io,solidforresearchtest101.solid.137.120.31.102.nip.io,solidforresearchtest102.solid.137.120.31.102.nip.io,solidforresearchtest103.solid.137.120.31.102.nip.io,solidforresearchtest104.solid.137.120.31.102.nip.io,solidforresearchtest105.solid.137.120.31.102.nip.io,solidforresearchtest106.solid.137.120.31.102.nip.io,solidforresearchtest107.solid.137.120.31.102.nip.io,solidforresearchtest108.solid.137.120.31.102.nip.io,solidforresearchtest109.solid.137.120.31.102.nip.io,solidforresearchtest110.solid.137.120.31.102.nip.io,solidforresearchtest111.solid.137.120.31.102.nip.io,solidforresearchtest112.solid.137.120.31.102.nip.io,solidforresearchtest113.solid.137.120.31.102.nip.io,solidforresearchtest114.solid.137.120.31.102.nip.io,solidforresearchtest115.solid.137.120.31.102.nip.io,solidforresearchtest116.solid.137.120.31.102.nip.io,solidforresearchtest117.solid.137.120.31.102.nip.io,solidforresearchtest118.solid.137.120.31.102.nip.io,solidforresearchtest119.solid.137.120.31.102.nip.io,solidforresearchtest120.solid.137.120.31.102.nip.io,solidforresearchtest121.solid.137.120.31.102.nip.io,solidforresearchtest122.solid.137.120.31.102.nip.io,solidforresearchtest123.solid.137.120.31.102.nip.io,solidforresearchtest124.solid.137.120.31.102.nip.io,solidforresearchtest125.solid.137.120.31.102.nip.io,solidforresearchtest126.solid.137.120.31.102.nip.io,solidforresearchtest127.solid.137.120.31.102.nip.io,solidforresearchtest128.solid.137.120.31.102.nip.io"
      # Let's encrypt does not work for 100 certs, so we need to limit to at least the main solid domain
      # And accept the security risk when accessing users subdomains
      - "LETSENCRYPT_HOST=solid.137.120.31.102.nip.io,solidforresearchtest01.solid.137.120.31.102.nip.io,solidforresearchtest02.solid.137.120.31.102.nip.io,solidforresearchtest03.solid.137.120.31.102.nip.io"
      # ,solidforresearchtest04.solid.137.120.31.102.nip.io,solidforresearchtest05.solid.137.120.31.102.nip.io,solidforresearchtest06.solid.137.120.31.102.nip.io,solidforresearchtest07.solid.137.120.31.102.nip.io,solidforresearchtest08.solid.137.120.31.102.nip.io,solidforresearchtest09.solid.137.120.31.102.nip.io,solidforresearchtest10.solid.137.120.31.102.nip.io,solidforresearchtest11.solid.137.120.31.102.nip.io,solidforresearchtest12.solid.137.120.31.102.nip.io,solidforresearchtest13.solid.137.120.31.102.nip.io,solidforresearchtest14.solid.137.120.31.102.nip.io,solidforresearchtest15.solid.137.120.31.102.nip.io,solidforresearchtest16.solid.137.120.31.102.nip.io,solidforresearchtest17.solid.137.120.31.102.nip.io,solidforresearchtest18.solid.137.120.31.102.nip.io,solidforresearchtest19.solid.137.120.31.102.nip.io,solidforresearchtest20.solid.137.120.31.102.nip.io,solidforresearchtest21.solid.137.120.31.102.nip.io,solidforresearchtest22.solid.137.120.31.102.nip.io,solidforresearchtest23.solid.137.120.31.102.nip.io,solidforresearchtest24.solid.137.120.31.102.nip.io,solidforresearchtest25.solid.137.120.31.102.nip.io,solidforresearchtest26.solid.137.120.31.102.nip.io,solidforresearchtest27.solid.137.120.31.102.nip.io,solidforresearchtest28.solid.137.120.31.102.nip.io,solidforresearchtest29.solid.137.120.31.102.nip.io,solidforresearchtest30.solid.137.120.31.102.nip.io,solidforresearchtest31.solid.137.120.31.102.nip.io,solidforresearchtest32.solid.137.120.31.102.nip.io,solidforresearchtest33.solid.137.120.31.102.nip.io,solidforresearchtest34.solid.137.120.31.102.nip.io,solidforresearchtest35.solid.137.120.31.102.nip.io,solidforresearchtest36.solid.137.120.31.102.nip.io,solidforresearchtest37.solid.137.120.31.102.nip.io,solidforresearchtest38.solid.137.120.31.102.nip.io,solidforresearchtest39.solid.137.120.31.102.nip.io,solidforresearchtest40.solid.137.120.31.102.nip.io,solidforresearchtest41.solid.137.120.31.102.nip.io,solidforresearchtest42.solid.137.120.31.102.nip.io,solidforresearchtest43.solid.137.120.31.102.nip.io,solidforresearchtest44.solid.137.120.31.102.nip.io,solidforresearchtest45.solid.137.120.31.102.nip.io,solidforresearchtest46.solid.137.120.31.102.nip.io,solidforresearchtest47.solid.137.120.31.102.nip.io,solidforresearchtest48.solid.137.120.31.102.nip.io,solidforresearchtest49.solid.137.120.31.102.nip.io,solidforresearchtest50.solid.137.120.31.102.nip.io,solidforresearchtest51.solid.137.120.31.102.nip.io,solidforresearchtest52.solid.137.120.31.102.nip.io,solidforresearchtest53.solid.137.120.31.102.nip.io,solidforresearchtest54.solid.137.120.31.102.nip.io,solidforresearchtest55.solid.137.120.31.102.nip.io,solidforresearchtest56.solid.137.120.31.102.nip.io,solidforresearchtest57.solid.137.120.31.102.nip.io,solidforresearchtest58.solid.137.120.31.102.nip.io,solidforresearchtest59.solid.137.120.31.102.nip.io,solidforresearchtest60.solid.137.120.31.102.nip.io,solidforresearchtest61.solid.137.120.31.102.nip.io,solidforresearchtest62.solid.137.120.31.102.nip.io,solidforresearchtest63.solid.137.120.31.102.nip.io,solidforresearchtest64.solid.137.120.31.102.nip.io,solidforresearchtest65.solid.137.120.31.102.nip.io,solidforresearchtest66.solid.137.120.31.102.nip.io,solidforresearchtest67.solid.137.120.31.102.nip.io,solidforresearchtest68.solid.137.120.31.102.nip.io,solidforresearchtest69.solid.137.120.31.102.nip.io,solidforresearchtest70.solid.137.120.31.102.nip.io,solidforresearchtest71.solid.137.120.31.102.nip.io,solidforresearchtest72.solid.137.120.31.102.nip.io,solidforresearchtest73.solid.137.120.31.102.nip.io,solidforresearchtest74.solid.137.120.31.102.nip.io,solidforresearchtest75.solid.137.120.31.102.nip.io,solidforresearchtest76.solid.137.120.31.102.nip.io,solidforresearchtest77.solid.137.120.31.102.nip.io,solidforresearchtest78.solid.137.120.31.102.nip.io,solidforresearchtest79.solid.137.120.31.102.nip.io,solidforresearchtest80.solid.137.120.31.102.nip.io,solidforresearchtest81.solid.137.120.31.102.nip.io,solidforresearchtest82.solid.137.120.31.102.nip.io,solidforresearchtest83.solid.137.120.31.102.nip.io,solidforresearchtest84.solid.137.120.31.102.nip.io,solidforresearchtest85.solid.137.120.31.102.nip.io,solidforresearchtest86.solid.137.120.31.102.nip.io,solidforresearchtest87.solid.137.120.31.102.nip.io,solidforresearchtest88.solid.137.120.31.102.nip.io,solidforresearchtest89.solid.137.120.31.102.nip.io,solidforresearchtest90.solid.137.120.31.102.nip.io,solidforresearchtest91.solid.137.120.31.102.nip.io,solidforresearchtest92.solid.137.120.31.102.nip.io,solidforresearchtest93.solid.137.120.31.102.nip.io,solidforresearchtest94.solid.137.120.31.102.nip.io,solidforresearchtest95.solid.137.120.31.102.nip.io,solidforresearchtest96.solid.137.120.31.102.nip.io,solidforresearchtest97.solid.137.120.31.102.nip.io,solidforresearchtest98.solid.137.120.31.102.nip.io,solidforresearchtest99.solid.137.120.31.102.nip.io,solidforresearchtest100.solid.137.120.31.102.nip.io,solidforresearchtest101.solid.137.120.31.102.nip.io,solidforresearchtest102.solid.137.120.31.102.nip.io,solidforresearchtest103.solid.137.120.31.102.nip.io,solidforresearchtest104.solid.137.120.31.102.nip.io,solidforresearchtest105.solid.137.120.31.102.nip.io,solidforresearchtest106.solid.137.120.31.102.nip.io,solidforresearchtest107.solid.137.120.31.102.nip.io,solidforresearchtest108.solid.137.120.31.102.nip.io,solidforresearchtest109.solid.137.120.31.102.nip.io,solidforresearchtest110.solid.137.120.31.102.nip.io,solidforresearchtest111.solid.137.120.31.102.nip.io,solidforresearchtest112.solid.137.120.31.102.nip.io,solidforresearchtest113.solid.137.120.31.102.nip.io,solidforresearchtest114.solid.137.120.31.102.nip.io,solidforresearchtest115.solid.137.120.31.102.nip.io,solidforresearchtest116.solid.137.120.31.102.nip.io,solidforresearchtest117.solid.137.120.31.102.nip.io,solidforresearchtest118.solid.137.120.31.102.nip.io,solidforresearchtest119.solid.137.120.31.102.nip.io,solidforresearchtest120.solid.137.120.31.102.nip.io,solidforresearchtest121.solid.137.120.31.102.nip.io,solidforresearchtest122.solid.137.120.31.102.nip.io,solidforresearchtest123.solid.137.120.31.102.nip.io,solidforresearchtest124.solid.137.120.31.102.nip.io,solidforresearchtest125.solid.137.120.31.102.nip.io,solidforresearchtest126.solid.137.120.31.102.nip.io,solidforresearchtest127.solid.137.120.31.102.nip.io,solidforresearchtest128.solid.137.120.31.102.nip.io"

      - "VIRTUAL_PORT=8443"
      - "VIRTUAL_PROTO=https"
      
      # Disable unsigned certs checks
      - NODE_TLS_REJECT_UNAUTHORIZED=0
    volumes: 
      - /data/certs:/opt/solid/certs
      - /data/solid/data:/opt/solid/data
      - /data/solid/.db:/opt/solid/.db
      - /data/solid/config:/opt/solid/config
